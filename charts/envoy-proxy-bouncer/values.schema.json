{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
        "autoscaling": {
            "type": "object",
            "properties": {
                "enabled": {
                    "default": false,
                    "type": "boolean"
                },
                "maxReplicas": {
                    "default": 10,
                    "type": "integer"
                },
                "minReplicas": {
                    "default": 1,
                    "type": "integer"
                },
                "targetCPUUtilizationPercentage": {
                    "default": 80,
                    "type": "integer"
                },
                "targetMemoryUtilizationPercentage": {
                    "default": 80,
                    "type": "integer"
                }
            }
        },
        "config": {
            "type": "object",
            "properties": {
                "bouncer": {
                    "type": "object",
                    "properties": {
                        "apiKey": {
                            "default": "",
                            "type": "string"
                        },
                        "apiKeySecretRef": {
                            "type": "object",
                            "properties": {
                                "key": {
                                    "default": "",
                                    "type": "string"
                                },
                                "name": {
                                    "default": "",
                                    "type": "string"
                                }
                            }
                        },
                        "enabled": {
                            "default": true,
                            "type": "boolean"
                        },
                        "lapiURL": {
                            "default": "http://crowdsec-service:8080",
                            "type": "string"
                        },
                        "metrics": {
                            "default": false,
                            "type": "boolean"
                        },
                        "metricsInterval": {
                            "default": "10m",
                            "type": "string"
                        },
                        "tickerInterval": {
                            "default": "10s",
                            "type": "string"
                        }
                    }
                },
                "captcha": {
                    "type": "object",
                    "properties": {
                        "callbackURL": {
                            "default": "",
                            "type": "string"
                        },
                        "challengeDuration": {
                            "default": "5m",
                            "type": "string"
                        },
                        "cookieDomain": {
                            "default": "",
                            "type": "string"
                        },
                        "enabled": {
                            "default": false,
                            "type": "boolean"
                        },
                        "provider": {
                            "default": "",
                            "type": "string"
                        },
                        "secretKey": {
                            "default": "",
                            "type": "string"
                        },
                        "secretKeySecretRef": {
                            "type": "object",
                            "properties": {
                                "key": {
                                    "default": "",
                                    "type": "string"
                                },
                                "name": {
                                    "default": "",
                                    "type": "string"
                                }
                            }
                        },
                        "secureCookie": {
                            "default": true,
                            "type": "boolean"
                        },
                        "sessionDuration": {
                            "default": "15m",
                            "type": "string"
                        },
                        "signingKey": {
                            "default": "",
                            "type": "string"
                        },
                        "signingKeySecretRef": {
                            "type": "object",
                            "properties": {
                                "key": {
                                    "default": "",
                                    "type": "string"
                                },
                                "name": {
                                    "default": "",
                                    "type": "string"
                                }
                            }
                        },
                        "siteKey": {
                            "default": "",
                            "type": "string"
                        },
                        "timeout": {
                            "default": "10s",
                            "type": "string"
                        }
                    }
                },
                "server": {
                    "type": "object",
                    "properties": {
                        "grpcPort": {
                            "default": 8080,
                            "type": "integer"
                        },
                        "httpPort": {
                            "default": 8081,
                            "type": "integer"
                        },
                        "logLevel": {
                            "default": "info",
                            "type": "string"
                        }
                    }
                },
                "templates": {
                    "type": "object",
                    "properties": {
                        "captchaTemplateHeaders": {
                            "default": "",
                            "type": "string"
                        },
                        "captchaTemplatePath": {
                            "default": "",
                            "type": "string"
                        },
                        "deniedTemplateHeaders": {
                            "default": "",
                            "type": "string"
                        },
                        "deniedTemplatePath": {
                            "default": "",
                            "type": "string"
                        }
                    }
                },
                "trustedProxies": {
                    "default": [],
                    "type": "array"
                },
                "waf": {
                    "type": "object",
                    "properties": {
                        "apiKey": {
                            "default": "",
                            "type": "string"
                        },
                        "apiKeySecretRef": {
                            "type": "object",
                            "properties": {
                                "key": {
                                    "default": "",
                                    "type": "string"
                                },
                                "name": {
                                    "default": "",
                                    "type": "string"
                                }
                            }
                        },
                        "appSecURL": {
                            "default": "http://crowdsec-appsec-service:7422",
                            "type": "string"
                        },
                        "enabled": {
                            "default": false,
                            "type": "boolean"
                        }
                    }
                }
            }
        },
        "fullnameOverride": {
            "default": "",
            "type": "string"
        },
        "httproute": {
            "type": "object",
            "properties": {
                "annotations": {
                    "default": {},
                    "type": "object"
                },
                "enabled": {
                    "default": false,
                    "type": "boolean"
                },
                "hostnames": {
                    "default": [],
                    "type": "array"
                },
                "parentRefs": {
                    "default": [],
                    "type": "array"
                }
            }
        },
        "image": {
            "type": "object",
            "properties": {
                "pullPolicy": {
                    "default": "IfNotPresent",
                    "type": "string"
                },
                "repository": {
                    "default": "ghcr.io/kdwils/envoy-proxy-bouncer",
                    "type": "string"
                },
                "tag": {
                    "default": ".Chart.AppVersion",
                    "type": "string"
                }
            }
        },
        "imagePullSecrets": {
            "type": "array"
        },
        "nameOverride": {
            "default": "",
            "type": "string"
        },
        "podSecurityContext": {
            "type": "object"
        },
        "probes": {
            "type": "object",
            "properties": {
                "liveness": {
                    "type": "object",
                    "properties": {
                        "failureThreshold": {
                            "default": 3,
                            "type": "integer"
                        },
                        "initialDelaySeconds": {
                            "default": 10,
                            "type": "integer"
                        },
                        "periodSeconds": {
                            "default": 5,
                            "type": "integer"
                        },
                        "timeoutSeconds": {
                            "default": 5,
                            "type": "integer"
                        }
                    }
                },
                "readiness": {
                    "type": "object",
                    "properties": {
                        "failureThreshold": {
                            "default": 3,
                            "type": "integer"
                        },
                        "initialDelaySeconds": {
                            "default": 5,
                            "type": "integer"
                        },
                        "periodSeconds": {
                            "default": 5,
                            "type": "integer"
                        },
                        "timeoutSeconds": {
                            "default": 3,
                            "type": "integer"
                        }
                    }
                }
            }
        },
        "referenceGrant": {
            "type": "object",
            "properties": {
                "create": {
                    "default": false,
                    "type": "boolean"
                },
                "fromNamespaces": {
                    "default": [],
                    "type": "array"
                }
            }
        },
        "replicaCount": {
            "default": 1,
            "type": "integer"
        },
        "resources": {
            "type": "object",
            "properties": {
                "limits": {
                    "type": "object",
                    "properties": {
                        "cpu": {
                            "type": "string"
                        },
                        "memory": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "securityContext": {
            "type": "object",
            "properties": {
                "allowPrivilegeEscalation": {
                    "type": "boolean"
                },
                "capabilities": {
                    "type": "object",
                    "properties": {
                        "drop": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "readOnlyRootFilesystem": {
                    "type": "boolean"
                },
                "runAsNonRoot": {
                    "type": "boolean"
                },
                "runAsUser": {
                    "type": "integer"
                }
            }
        },
        "service": {
            "type": "object",
            "properties": {
                "grpcPort": {
                    "default": 8080,
                    "type": "integer"
                },
                "httpPort": {
                    "default": 8081,
                    "type": "integer"
                },
                "type": {
                    "default": "ClusterIP",
                    "type": "string"
                }
            }
        },
        "serviceAccount": {
            "type": "object",
            "properties": {
                "create": {
                    "default": true,
                    "type": "boolean"
                },
                "name": {
                    "default": "",
                    "type": "string"
                }
            }
        },
        "templates": {
            "type": "object",
            "properties": {
                "captchaTemplateContent": {
                    "default": "",
                    "type": "string"
                },
                "deniedTemplateContent": {
                    "default": "",
                    "type": "string"
                }
            }
        }
    }
}
